{% load static %}
<nav class="curved-nav-bar">
    <!-- Home -->
    <a href="{% url 'feed' %}" class="nav-item {% if request.path == '/' or 'feed' in request.path %}active{% endif %}">
        <div class="nav-icon-container">
            <svg viewBox="0 0 24 24" class="nav-icon">
                <path d="M12 5L3 12V20H9V14H15V20H21V12L12 5Z" 
                      stroke="currentColor" stroke-width="1.5" 
                      stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        {% if request.path == '/' or 'feed' in request.path %}<span class="nav-label">Home</span>{% endif %}
    </a>

    <!-- Explore -->
        <a href="{% url 'friends' %}" class="nav-item {% if 'friends' in request.path %}active{% endif %}">
        <div class="nav-icon-container">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="nav-icon">
                <path d="M230.39,255.512c-5.879-5.881-13.548-8.875-21.256-9c29.804-44.402,25.106-105.25-14.105-144.465
		c-44.557-44.555-117.054-44.555-161.61,0c-44.558,44.557-44.558,117.059,0,161.613c39.212,39.213,100.059,43.908,144.463,14.105
		c0.124,7.705,3.117,15.377,8.998,21.256l79.443,79.445c12.017,12.016,31.495,12.016,43.512,0c12.018-12.018,12.018-31.494,0-43.512
		L230.39,255.512z M170.165,238.797c-30.845,30.848-81.039,30.848-111.884,0c-30.848-30.848-30.848-81.037,0-111.887
		c30.845-30.846,81.039-30.846,111.884,0C201.013,157.76,201.013,207.949,170.165,238.797z"/>
	<path d="M225.549,112.678h39.852c4.603,0,9.014-1.826,12.266-5.08l30.385-30.383h104.603c9.58,0,17.347-7.766,17.347-17.348
		c0-9.578-7.767-17.346-17.347-17.346H300.866c-4.603,0-9.015,1.826-12.267,5.082l-30.384,30.381h-64.435
		c4.724,3.6,9.244,7.529,13.515,11.799C214.335,96.826,220.417,104.52,225.549,112.678z"/>
	<path d="M412.654,204.422h-70.152L315.68,189c-2.631-1.512-5.612-2.309-8.646-2.309h-61.325
		c-0.329,11.684-2.198,23.355-5.652,34.691h62.345l26.822,15.424c2.633,1.512,5.614,2.309,8.647,2.309h74.783
		c9.58,0,17.347-7.768,17.347-17.348C430,212.188,422.234,204.422,412.654,204.422z"/>
	<path d="M411.883,130.797H235.07c4.773,11.121,7.955,22.805,9.537,34.691h167.276c9.579,0,17.346-7.766,17.346-17.346
		C429.229,138.563,421.462,130.797,411.883,130.797z"/>
    </svg>
              
        </div>
        {% if 'friends' in request.path %}<span class="nav-label">friends</span>{% endif %}
    </a>

    <!-- Center Upload -->
    <div class="nav-center-spacer">
        <a href="{% url 'upload_post' %}" class="nav-upload-btn">
            <img src="{% static 'img/logo_t.png' %}" alt="Post" style="width: 24px; height: 24px;">
        </a>
    </div>

    <!-- Notifications -->
    <a href="{% url 'notification-list' %}" class="nav-item {% if 'notifications' in request.path %}active{% endif %}">
        <div class="nav-icon-container">
            <svg viewBox="0 0 24 24" class="nav-icon">
                <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" 
                      stroke="currentColor" stroke-width="1.5" 
                      stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        {% if 'notifications' in request.path %}<span class="nav-label">Alerts</span>{% endif %}
    </a>

    <!-- Profile -->
    <a href="{% url 'profile' username=request.user.username %}" class="nav-item {% if 'profile' in request.path %}active{% endif %}">
        <div class="nav-icon-container">
            <svg viewBox="0 0 24 24" class="nav-icon">
                <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" 
                      stroke="currentColor" stroke-width="1.5" 
                      stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" 
                      stroke="currentColor" stroke-width="1.5" 
                      stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        {% if 'profile' in request.path %}<span class="nav-label">Profile</span>{% endif %}
    </a>
</nav>

<style>
.curved-nav-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 72px;
    background: white;
    display: flex;
    justify-content: space-around;
    align-items: flex-end;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
    z-index: 1000;
    padding: 0 8px;
    padding-bottom: 8px;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: #8e8e8e;
    flex: 1;
    height: 100%;
    position: relative;
    transition: all 0.2s ease;
}

.nav-item.active {
    color: #000000;
}

.nav-icon-container {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.2s ease;
}

.nav-item.active .nav-icon-container {
    background: rgba(0, 0, 0, 0.05);
    transform: translateY(-10px);
}

.nav-icon {
    width: 24px;
    height: 24px;
    stroke: currentColor;
}

.nav-label {
    font-size: 11px;
    font-weight: 500;
    margin-top: 4px;
    position: absolute;
    bottom: 12px;
    opacity: 0;
    transition: all 0.2s ease;
}

.nav-item.active .nav-label {
    opacity: 1;
    bottom: 8px;
}

.nav-center-spacer {
    position: relative;
    width: 60px;
    height: 100%;
    display: flex;
    justify-content: center;
}

.nav-upload-btn {
    position: absolute;
    bottom: 20px;
    width: 48px;
    height: 48px;
    background: linear-gradient(135deg, #0095f6, #0064e0);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 149, 246, 0.3);
    transition: all 0.2s ease;
    z-index: 1001;
}

.nav-upload-btn svg {
    width: 20px;
    height: 20px;
}

.nav-upload-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 6px 16px rgba(0, 149, 246, 0.4);
}

/* Curved gap effect */
.nav-center-spacer::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: -20px;
    right: -20px;
    height: 20px;
    background: transparent;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    box-shadow: 0 -10px 0 0 white;
    z-index: 999;
}
</style>

<script>
// Auto-highlight current page
document.addEventListener('DOMContentLoaded', function() {
    const currentPath = window.location.pathname;
    const navItems = document.querySelectorAll('.nav-item');
    
    navItems.forEach(item => {
        const href = item.getAttribute('href');
        if (href && currentPath.includes(href.split('/')[1])) {
            item.classList.add('active');
        }
    });
    
    // Special case for home page
    if (currentPath === '/' || currentPath.includes('feed')) {
        document.querySelector("[href='{% url 'feed' %}']").classList.add('active');
    }
});
</script>