{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="post-detail-container">
    <div class="post-media">
        {% if post.content_type == 'image' %}
            <img src="{{ post.media_file.url }}" alt="{{ post.caption }}">
        {% else %}
            <video controls>
                <source src="{{ post.media_file.url }}" type="video/mp4">
            </video>
        {% endif %}
    </div>
    
    <div class="post-details">
        <div class="post-header">
            {% if post.user.username %}
                <img src="{{ post.user.profile.profile_picture.url }}" alt="{{ post.user.username }}" class="profile-pic-sm">
                <a href="{% url 'profile' post.user.username %}">@{{ post.user.username }}</a>
            {% else %}
                <span>@deleted_user</span>
            {% endif %}
            
            {% if is_owner %}
            <div class="post-actions">
                <!-- ... existing edit button ... -->
                <form action="{% url 'post_delete' post.id %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
            </div>
            {% endif %}
        </div>
        
        <div class="post-caption">
            {{ post.caption }}
        </div>
        
        <div class="post-stats">
            <span><i class="fas fa-heart"></i> {{ post.likes.count }}</span>
            <span><i class="fas fa-comment"></i> {{ post.comments.count }}</span>
            <span><i class="fas fa-eye"></i> {{ post.views }}</span>
        </div>
        
        <div class="post-comments">
            <!-- Comments section -->
        </div>
    </div>
</div>
{% endblock %}